\documentclass[12pt, titlepage]{article}

\usepackage{amsmath, mathtools}

\usepackage[round]{natbib}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{graphicx}
\usepackage{colortbl}
\usepackage{xr}
\usepackage{hyperref}
\usepackage{longtable}
\usepackage{xfrac}
\usepackage{tabularx}
\usepackage{float}
\usepackage{siunitx}
\usepackage{booktabs}
\usepackage{multirow}
\usepackage[section]{placeins}
\usepackage{caption}
\usepackage{fullpage}

\hypersetup{
bookmarks=true,     % show bookmarks bar?
colorlinks=true,       % false: boxed links; true: colored links
linkcolor=red,          % color of internal links (change box color with linkbordercolor)
citecolor=blue,      % color of links to bibliography
filecolor=magenta,  % color of file links
urlcolor=cyan          % color of external links
}

\usepackage{array}

\externaldocument{../../SRS/SRS}

\input{../../Comments}
\input{../../Common}

\begin{document}

\title{Module Interface Specification for \progname{}}

\author{\authname}

\date{\today}

\maketitle

\pagenumbering{roman}

\section{Revision History}

\begin{tabularx}{\textwidth}{p{3cm}p{2cm}X}
\toprule {\bf Date} & {\bf Version} & {\bf Notes}\\
\midrule
January 17 & 1.0 & Initial documentation\\
\bottomrule
\end{tabularx}

~\newpage

\section{Symbols, Abbreviations and Acronyms}

See SRS Documentation at \href{https://github.com/SyntaxSentinels/SyntaxSentinels/blob/main/docs/SRS-Volere/SRS.pdf}{SRS} and \href{https://github.com/SyntaxSentinels/SyntaxSentinels/blob/main/docs/Design/SoftArchitecture/MG.pdf}{MG}.

% \wss{Also add any additional symbols, abbreviations or acronyms}

\newpage

\tableofcontents

\newpage

\pagenumbering{arabic}

\section{Introduction}

The following document details the Module Interface Specifications for SyntaxSentinals.

This project seeks to create a plagiarism algorithm that relies on NLP
techniques of present to account for semantics and prevent primitive cir-
cumvention of plagiarism detection, such as the addition of benign lines or
variable name changes. The users of our product will primarily be those con-
cerned with fairness and integrity of code submissions within a competitive
environment, such as professors or code competition holders.

Users are intended to use the resulting product of our project by giving
it code snippets and receiving a plagiarism report in return. This report
will contain a set of similarity scores for inputted code snippets, which when
assessed against an outputted threshold will indicate likelihood of plagiarsm
having taken place. This will benefit the users by allowing them to more accurately assess the presence of plagiarized work, 
creating a fairer environment for competition and rewarding coders correctly. 
Ultimately, the project aims to help users achieve an environment that cycles merit 
instead of cheating, which is believed to be a primary interest of users too.

Complementary documents include the System Requirement Specifications
and Module Guide.  The full documentation and implementation can be
found at \url{https://github.com/SyntaxSentinels/SyntaxSentinels}. 

\section{Notation}

Below is a summary of the notations used in this document:

\begin{center}
\renewcommand{\arraystretch}{1.2}
\noindent
\begin{tabular}{l l p{8cm}} 
\toprule 
\textbf{Data Type} & \textbf{Notation} & \textbf{Description} \\ 
\midrule
character & char & A single symbol or digit. \\ 
integer & $\mathbb{Z}$ & A whole number in the range $(-\infty, \infty)$. \\ 
natural number & $\mathbb{N}$ & A whole number in the range $[1, \infty)$. \\ 
real & $\mathbb{R}$ & Any number in the range $(-\infty, \infty)$. \\ 
boolean & bool & A logical value that can either be \texttt{true} or \texttt{false}. \\
string & str & A sequence of characters. \\ 
tuple & tuple & An ordered collection of elements, potentially of different types. \\
Abstract Syntax Tree & AST & Tree representing code like that described here \url{https://docs.python.org/3/library/ast.html} \\
file & file & An opaque handle to a file on the disk, or a collection of binary data to be written to a file \\
\bottomrule
\end{tabular} 
\end{center}

\noindent
The following conventions are also used:
\begin{itemize}
    \item \textbf{Assignment}: The operator \texttt{:=} denotes assignment.
    \item \textbf{Conditional Rules}: Conditional statements follow the structure $(c_1 \Rightarrow r_1 \mid c_2 \Rightarrow r_2 \mid \ldots \mid c_n \Rightarrow r_n)$, where $c_i$ are conditions and $r_i$ are corresponding results.
    \item \textbf{Access Programs}: Functions and methods are defined with their inputs, outputs, and exceptions as described in the syntax sections of each module.
\end{itemize}

\section{Module Decomposition}

The following table is taken directly from the Module Guide document for this project.

\begin{table}[h!]
    \centering
    \begin{tabular}{p{0.35\textwidth} p{0.55\textwidth}}
    \toprule
    \textbf{Level 1} & \textbf{Level 2} \\
    \midrule
    {Hardware-Hiding Module} & ~ \\
    \midrule
    \multirow{2}{*}{Behaviour-Hiding Module} 
    & User Authentication Module \\
    & Code Upload Module \\
    & Report Results Module \\
    & Threshold Adjustment Module \\
    \midrule
    \multirow{2}{*}{Software Decision Module} 
    & Report Generation Module \\
    & Similarity Scoring Module \\
    & NLP Model Module \\
    & Abstract ML Model Module \\
    & Tokenization Module \\
    & AST Module \\
   
    \bottomrule
    \end{tabular}
    \caption{Module Hierarchy}
    \label{TblMH}
  \end{table}
%new breakdown
\newpage
~\newpage

% \section{MIS of \wss{Module Name}} \label{Module} \wss{Use labels for
%   cross-referencing}

% \wss{You can reference SRS labels, such as R\ref{R_Inputs}.}

% \wss{It is also possible to use \LaTeX for hypperlinks to external documents.}

% \subsection{Module}

% \wss{Short name for the module}

% \subsection{Uses}


% \subsection{Syntax}

% \subsubsection{Exported Constants}

% \subsubsection{Exported Access Programs}

% \begin{center}
% \begin{tabular}{p{2cm} p{4cm} p{4cm} p{2cm}}
% \hline
% \textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
% \hline
% \wss{accessProg} & - & - & - \\
% \hline
% \end{tabular}
% \end{center}

% \subsection{Semantics}

% \subsubsection{State Variables}

% \wss{Not all modules will have state variables.  State variables give the module
%   a memory.}

% \subsubsection{Environment Variables}

% \wss{This section is not necessary for all modules.  Its purpose is to capture
%   when the module has external interaction with the environment, such as for a
%   device driver, screen interface, keyboard, file, etc.}

% \subsubsection{Assumptions}

% \wss{Try to minimize assumptions and anticipate programmer errors via
%   exceptions, but for practical purposes assumptions are sometimes appropriate.}

% \subsubsection{Access Routine Semantics}

% \noindent \wss{accessProg}():
% \begin{itemize}
% \item transition: \wss{if appropriate} 
% \item output: \wss{if appropriate} 
% \item exception: \wss{if appropriate} 
% \end{itemize}

% \wss{A module without environment variables or state variables is unlikely to
%   have a state transition.  In this case a state transition can only occur if
%   the module is changing the state of another module.}

% \wss{Modules rarely have both a transition and an output.  In most cases you
%   will have one or the other.}

% \subsubsection{Local Functions}

% \wss{As appropriate} \wss{These functions are for the purpose of specification.
%   They are not necessarily something that is going to be implemented
%   explicitly.  Even if they are implemented, they are not exported; they only
%   have local scope.}


\section{MIS of Code Upload Module} \label{mCodeUpload}

\subsection{Module} %MODULE STARTS###

\texttt{CodeUploadModule}

\subsection{Uses}

\begin{itemize}
    \item Frontend for uploading files
    \item Backend for receiving and processing files
    \item Firebase for storing job information
    \item AWS S3 for storing uploaded files
    \item AWS SQS for queuing jobs
\end{itemize}

\subsection{Syntax}

\subsubsection{Exported Constants}

\begin{itemize}
    \item \texttt{MAX\_FILES}: $\mathbb{N}$ \\
    Maximum number of files allowed to be uploaded (currently 500).
    \item \texttt{ALLOWED\_FILE\_TYPES}: \\
    Allowed file types are either a single zip file or multiple python files.
\end{itemize}

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{5cm} p{3.5cm} p{3.5cm} p{2cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
\texttt{uploadFiles} & files: FileList, analysisName: string & jobId: string, status: string & BadRequestException \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

\begin{itemize}
    \item None
\end{itemize}

\subsubsection{Environment Variables}

\begin{itemize}
    \item \texttt{BACKEND\_URL}: Str \\
    URL endpoint for sending processed data to the backend.
\end{itemize}

\subsubsection{Assumptions}

\begin{itemize}
    \item The backend service is reachable under \texttt{BACKEND\_URL}.
    \item The user is authenticated with Auth0.
\end{itemize}

\subsubsection{Access Routine Semantics}

\noindent \texttt{uploadFiles}(files: FileList, analysisName: string):
\begin{itemize}
    \item \textbf{transition:} None (no internal state change.)
    \item \textbf{input:}
    \begin{itemize}
        \item \texttt{files}: FileList - List of files to upload.
        \item \texttt{analysisName}: string - Name of the analysis.
    \end{itemize}
    \item \textbf{output:}
    \begin{itemize}
        \item \texttt{jobId}: string - ID of the submitted job.
        \item \texttt{status}: string - Status of the job (pending).
    \end{itemize}
    \item \textbf{exception:} \texttt{BadRequestException} if:
    \begin{itemize}
        \item No files are uploaded.
        \item There is a mix of file extensions (zip and python).
        \item More than one zip file is uploaded.
        \item The zip file contains non-python files.
        \item Duplicate file names are uploaded.
        \item Too many files are uploaded (more than \texttt{MAX\_FILES}).
        \item Too few files are uploaded (less than 2 python files).
        \item No user ID found in token payload.
	    \item Analysis name is missing or empty.
    \end{itemize}
\end{itemize}

\subsubsection{Local Functions}

\begin{itemize}
    \item None
\end{itemize}

\subsection{Module} %MODULE STARTS ###

\texttt{ResultsUploadModule}

\subsection{Uses}

\begin{itemize}
    \item Frontend for displaying results
    \item Backend for serving results
    \item Firebase for storing job information
    \item AWS S3 for storing uploaded files
\end{itemize}

\subsection{Syntax}

\subsubsection{Exported Constants}

\begin{itemize}
    \item None
\end{itemize}

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{5cm} p{3.5cm} p{3.5cm} p{2cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
\texttt{pollResults} & jobId: string & jobId: string, status: string, resultData: JSON & HttpRequestException \\
\texttt{getFileContentsFromS3} & jobId: string & fileContents: Record<string, string> & Error \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

\begin{itemize}
    \item None
\end{itemize}

\subsubsection{Environment Variables}

\begin{itemize}
    \item None
\end{itemize}

\subsubsection{Assumptions}

\begin{itemize}
    \item The user is authenticated with Auth0.
\end{itemize}

\subsubsection{Access Routine Semantics}

\noindent \texttt{pollResults}(jobId: string):
\begin{itemize}
    \item \textbf{transition:} None (no internal state change.)
    \item \textbf{input:}
    \begin{itemize}
        \item \texttt{jobId}: string - ID of the job to retrieve results for.
    \end{itemize}
    \item \textbf{output:}
    \begin{itemize}
        \item \texttt{jobId}: string - ID of the job.
        \item \texttt{status}: string - Status of the job.
        \item \texttt{resultData}: JSON - Results of the job.
    \end{itemize}
    \item \textbf{exception:} \texttt{HttpRequestException} if:
    \begin{itemize}
        \item \texttt{jobId} is missing.
        \item Results are not found.
        \item Unauthorized access.
    \end{itemize}
\end{itemize}

\noindent \texttt{getFileContentsFromS3}(jobId: string):
\begin{itemize}
    \item \textbf{transition:} None (no internal state change.)
    \item \textbf{input:}
    \begin{itemize}
        \item \texttt{jobId}: string - ID of the job to retrieve file contents for.
    \end{itemize}
    \item \textbf{output:}
    \begin{itemize}
        \item \texttt{fileContents}: Record<string, string> - File contents.
    \end{itemize}
    \item \textbf{exception:} Error if failed to get file contents from S3.
\end{itemize}

\section{MIS of Threshold Adjustment Module} \label{mThreshold} %MODULE START ####

\subsection{Module}

\texttt{ThresholdModule}

\subsection{Uses}

\begin{itemize}
    \item Frontend for adjusting the threshold
    \item Backend for storing and retrieving the threshold
\end{itemize}

\subsection{Syntax}

\subsubsection{Exported Constants}

\begin{itemize}
    \item \texttt{DEFAULT\_THRESHOLD} :  $\mathbb{R}$ \\
    A real number (e.g., 0.75) used if no custom threshold is set.
    \item \texttt{THRESHOLD\_RANGE} : $2-tuple \in \mathbb{R}^ 2 $ \\
    A 2-tuple of real numbers  (e.g., \texttt{(0, 1)}) defining the permissable bounds for a threshold.
\end{itemize}

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{3.5cm} p{3.8cm} p{3cm} p{2.5cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
\texttt{getThreshold} & - & value: $\mathbb{R}$ & Error \\
\texttt{setThreshold} & newVal: $\mathbb{R}$ & success: bool & Error \\
\texttt{validateThreshold} & value: $\mathbb{R}$ & success: bool & Error \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

\begin{itemize}
    \item \texttt{currentThreshold} : $\mathbb{R}$ \\
     Represents the chosen plagiarism detection threshold.
\end{itemize}

\subsubsection{Environment Variables}

\begin{itemize}
    \item None
\end{itemize}

\subsubsection{Assumptions}

\begin{itemize}
    \item \texttt{currentThreshold} is always within \texttt{THRESHOLD\_RANGE}.
\end{itemize}

\subsubsection{Access Routine Semantics}

\noindent \texttt{getThreshold}():
\begin{itemize}
    \item \textbf{transition:} None (no change to internal state).
    \item \textbf{input:} None
    \item \textbf{output:} Returns the current threshold, i.e., \texttt{currentThreshold}.
    \item \textbf{exception:} Error if the threshold is undefined or fails to load from persistence.
\end{itemize}

\noindent \texttt{setThreshold}(newVal: $\mathbb{R}$):
\begin{itemize}
    \item \textbf{transition:}
    \begin{itemize}
        \item Uses \texttt{validateThreshold} to check if \textit{newVal} falls within \texttt{THRESHOLD\_RANGE}.
        \item Updates \texttt{currentThreshold} to \textit{newVal} if valid.
    \end{itemize}
    \item \textbf{input:} A real number representing user's new desired threshold.
    \item \textbf{output:} \texttt{true} if \textit{newVal} is successfully set; otherwise \texttt{false}.
    \item \textbf{exception:} Error if \textit{newVal} is out of range or otherwise invalid.
\end{itemize}

\noindent \texttt{validateThreshold}(val: $\mathbb{R}$):
\begin{itemize}
    \item \textbf{transition:} None (does not change internal state).
    \item \textbf{input:} A real number representing user's new desired threshold.
    \item \textbf{output:} \texttt{true} if \textit{value} is in \texttt{THRESHOLD\_RANGE}; otherwise \texttt{false}.
    \item \textbf{exception:} Error if \textit{value} is malformed (e.g., not a number).
\end{itemize}

\subsubsection{Local Functions}

\begin{itemize}
    \item None
\end{itemize}


\section{MIS of Report Results Module} \label{mResults}

\subsection{Module}

\texttt{ResultsModule}

\subsection{Uses}

\begin{itemize}
    \item Frontend for displaying results
    \item Backend for serving results
    \item Firebase for storing job information
    \item AWS S3 for storing uploaded files
\end{itemize}

\subsection{Syntax}

\subsubsection{Exported Access Program}

\begin{center}
\begin{tabular}{p{5cm} p{4cm} p{3.5cm} p{2cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
\texttt{No specific access programs} & - & - & - \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

\begin{itemize}
    \item None
\end{itemize}

\subsubsection{Environment Variables}

\begin{itemize}
    \item None
\end{itemize}

\subsubsection{Assumptions}

\begin{itemize}
    \item The user is authenticated with Auth0.
\end{itemize}

\subsubsection{Access Routine Semantics}

\noindent There are no specific access routines for this module, as it mainly involves displaying the results fetched by the \texttt{ResultsUploadModule}.

\section{NLP Module}  \label{NLPModule} %Module start here ####

\subsection{Module}

\texttt{NLPModule}

\subsection{Uses}

\begin{itemize}
    \item Abstract ML Model Module
    \item Tokenization Module
    \item AST Module
\end{itemize}

\subsection{Syntax}

\subsubsection{Exported Constants}

\begin{itemize}
    \item None
\end{itemize}

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{5cm} p{3.5cm} p{3.5cm} p{2cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\ 
\hline
\texttt{combinedPredict} & data: JSON & relations: list[dict[Str, $\mathbb{R}$]] & Error \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

\begin{itemize}
    \item None
\end{itemize}

\subsubsection{Environment Variables}

\begin{itemize}
  \item None
\end{itemize}

\subsubsection{Assumptions}

\begin{itemize}
    \item The code snippets inputted within any data received comes from one programming language.
\end{itemize}

\subsubsection{Access Routine Semantics}
\noindent \texttt{combinedPredict}(data: JSON):
\begin{itemize}
    \item \textbf{transition:} None (no internal state change.)
    \item \textbf{input:} Data representing inputted code snippets in a JSON format.
    \item \textbf{output:} A variable denoted as relations of type \texttt{list[dict[Str, $\mathbb{R}$]]} that contains an assembly of results from each of the used modules so the results can be combined to get a more balanced perspective of relations between code snippets.
    \item \textbf{exception:} Error if any of the underlying modules fail.
\end{itemize}

\subsubsection{Local Functions}
No local functions are required for this module.


%END OF NLP Module

\section{MIS of Abstract Model Module} \label{smMLModel} %Module Start

\subsection{Module}

\texttt{MLModule}

\subsection{Uses}

\begin{itemize}
    \item \texttt{transformers} library
\end{itemize}

\subsection{Syntax}

\subsubsection{Exported Constants}

\begin{itemize}
    \item None.
\end{itemize}

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{5cm} p{3.5cm} p{3.5cm} p{2cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
\texttt{train} & data: 2-tuple[list[Str], dict[Str, $\mathbb{R}$]], supervised: bool , timeout: $\mathbb{Z}$  & None & Error \\
\texttt{predict} & data: list[Str] & result: dict[Str, $\mathbb{R}$] & Error \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

\begin{itemize}
    \item weightings: list[$\mathbb{R}$] \\
    Weightings that affect prediction of model
\end{itemize}

\subsubsection{Environment Variables}

\begin{itemize}
  \item None
\end{itemize}

\subsubsection{Assumptions}

\begin{itemize}
    \item The code snippets inputted within any data received comes from one programming language.
\end{itemize}
\subsubsection{Access Routine Semantics}

\noindent \texttt{train(data: 2-tuple[list[Str], dict[Str, $\mathbb{R}$]], supervised: bool, timeout: $\mathbb{R}$)}:
\begin{itemize}
    \item \textbf{transition:} 
    \begin{itemize}
        \item weightings := updated\_weightings -- assign new weightings from batch training to weightings
    \end{itemize}
    \item \textbf{input:} code snippets received for training purposes coupled with predictions which may or may not be empty depending on if learning is supervised or not (\textit{true or false}).
    \item \textbf{output:} None
    \item \textbf{exception:} Error if training time exceeds time limit allotted. 
\end{itemize}

\noindent \texttt{predict(data: list[Str])}:
\begin{itemize}
    \item \textbf{transition:} None (no internal state change.)
    \item \textbf{input:} Data representing inputted code snippets parsed into string format.
    \item \textbf{output:} Prediction object containing semantic relations between code snippets contained within the DataStruct data.
    \item \textbf{exception:} Error if prediction fails.
\end{itemize}
% END OF ABSTRACT MODEL MODULE


\section{MIS of Tokenization Modlue} \label{smTokenization}

\subsection{Module}

\texttt{TokenizationModule}

\subsection{Uses}

\begin{itemize}
    \item None
\end{itemize}

\subsection{Syntax}

\subsubsection{Exported Constants}

\begin{itemize}
    \item None
\end{itemize}

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{5cm} p{3.5cm} p{3.5cm} p{2cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
\texttt{tokenize} & source: Str & tokens: list[$\mathbb{N}$] & Error \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

\begin{itemize}
    \item None
\end{itemize}

\subsubsection{Environment Variables}

\begin{itemize}
  \item None
\end{itemize}

\subsubsection{Assumptions}

\begin{itemize}
    \item None
\end{itemize}

\subsubsection{Access Routine Semantics}

\noindent \texttt{tokenize(source: str)}:
\begin{itemize}
    \item \textbf{transition:}
    \begin{itemize}
        \item None
    \end{itemize}
    \item \textbf{input:} A single code snippet.
    \item \textbf{output:} Returns a list of tokens (integers) corresponding to the input source text.
    \item \textbf{exception:} Error if the source code is syntactically invalid.
\end{itemize}

\subsubsection{Local Functions}

\noindent \texttt{pollOneToken($2-tuple \in \mathbb{N}^2$)}:
\begin{itemize}
    \item \textbf{transition:}
    \begin{itemize}
        \item None
    \end{itemize}
    \item \textbf{output:} Returns a single token read from the given indices of the source string, or None if invalid.
    \item \textbf{exception:} None
\end{itemize}
% END OF TOKENIZATION MODULE

\section{MIS of Abstract Syntax Tree Module} \label{smAST}

\subsection{Module}

\texttt{ASTModule}

\subsection{Uses}

\begin{itemize}
    \item Built in (for python) or external tree parsers
\end{itemize}

\subsection{Syntax}

\subsubsection{Exported Constants}

\begin{itemize}
    \item None
\end{itemize}

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{5cm} p{3.5cm} p{3.5cm} p{2cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
\texttt{parse} & rawSource: Str & tree: AST  & Error \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

\begin{itemize}
    \item None
\end{itemize}

\subsubsection{Environment Variables}

\begin{itemize}
  \item None
\end{itemize}

\subsubsection{Assumptions}

\begin{itemize}
    \item The code snippet provided is syntactically correct or can be parsed with the given rules.
\end{itemize}

\subsubsection{Access Routine Semantics}

\noindent \texttt{parse(rawSource: str)}:
\begin{itemize}
    \item \textbf{transition:} None (no internal state change.)
    \item \textbf{input:} A string representing the input source code
    \item \textbf{output:} Returns the root node of the AST
    \item \textbf{exception:} Error if parsing fails.
\end{itemize}

\subsubsection{Local Functions}
No local functions are required for this module.
% END OF AST MODULE

\section{Similarity Scoring Module} \label{mScoring}

\subsection{Module}

\texttt{SimScoreModule}

\subsection{Uses}

\begin{itemize}
    \item NLP module
\end{itemize}

\subsection{Syntax}

\subsubsection{Exported Constants}

\begin{itemize}
    \item None
\end{itemize}

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{5cm} p{3.5cm} p{3.5cm} p{2cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
\texttt{compare} & file1Content: string, file2Content: string, file1Name?: string, file2Name?: string & similarity_score: number, matches: array & HttpRequestException \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

\begin{itemize}
    \item None
\end{itemize}

\subsubsection{Environment Variables}

\begin{itemize}
  \item None
\end{itemize}

\subsubsection{Assumptions}

\begin{itemize}
    \item The code snippets inputted within any data received comes from one programming language.
\end{itemize}

\subsubsection{Access Routine Semantics}
\noindent \texttt{compare}(file1Content: string, file2Content: string, file1Name?: string, file2Name?: string):
\begin{itemize}
    \item \textbf{transition:} None (no internal state change.)
    \item \textbf{input:}
    \begin{itemize}
        \item file1Content: string - Content of the first file.
        \item file2Content: string - Content of the second file.
	    \item file1Name: string (optional) - Name of the first file.
	    \item file2Name: string (optional) - Name of the second file.
    \end{itemize}
    \item \textbf{output:}
    \begin{itemize}
        \item similarity_score: number - Score indicating similarity between the two files.
	    \item matches: array - Array of match clusters.
    \end{itemize}
    \item \textbf{exception:} \texttt{HttpRequestException} if:
    \begin{itemize}
        \item file1Content or file2Content is missing.
        \item file1Content or file2Content is not a string.
    \end{itemize}
\end{itemize}

\subsubsection{Local Functions}
No local functions are required for this module.


%END OF SIMILARITY SCORING MODULE

\section{Report Generation Module} \label{mReport}

\subsection{Module}

\texttt{RepGenModule}

\subsection{Uses}

\begin{itemize}
    \item Similarity Scoring Module
\end{itemize}

\subsection{Syntax}

\subsubsection{Exported Constants}

\begin{itemize}
    \item None
\end{itemize}

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{5cm} p{3.5cm} p{3.5cm} p{2cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
\texttt{generate} & data: JSON & report: JSON & Error \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

\begin{itemize}
    \item None
\end{itemize}

\subsubsection{Environment Variables}

\begin{itemize}
  \item None
\end{itemize}

\subsubsection{Assumptions}

\begin{itemize}
    \item The code snippets inputted within any data received comes from one programming language.
\end{itemize}

\subsubsection{Access Routine Semantics}
\noindent \texttt{generate}(data: JSON):
\begin{itemize}
    \item \textbf{transition:} None (no internal state change.)
    \item \textbf{input:} Data containing code snippets inputted from the user in the front end.
    \item \textbf{output:} JSON object wrapping visuals associated with report and 
    similarity scorings to be received by the front end for displaying analysis to the user.
    \item \textbf{exception:} Error if report generation fails.
\end{itemize}

\subsubsection{Local Functions}
\noindent \texttt{assembleVisuals}(data: JSON):
\begin{itemize}
    \item \textbf{transition:} None (no internal state change.)
    \item \textbf{input:} Data containing code snippets inputted from the user in the front end.
    \item \textbf{output:} JSON
    \item \textbf{exception:} None
\end{itemize}


%END OF REPORT GENERATION MODULE

\newpage

\bibliographystyle {plainnat}
\bibliography {../../../refs/References}

\newpage

\section{Appendix} \label{Appendix}
This section highlights components of the systems that are not modules themselves, but support the other modules in the document.

\section*{Appendix --- Networking Considerations}
\begin{itemize}
    \item Rate limiting is planned to support the Code Upload Module
    \begin{itemize}
        \item This ensures code uploads cannot be sent in excessive amounts, and also prevents DoS attacks.
        \item Rate limiting will also ensure fair processing time for all users.
    \end{itemize}
    \item The report generation module will be hidden behind an API layer in the back end.
    \begin{itemize}
        \item The API will be implemented using a framework such as Django or Flask.
    \end{itemize}
\end{itemize}

\section*{Appendix --- Reflection}

The information in this section will be used to evaluate the team members on the
graduate attribute of Problem Analysis and Design.

\input{../../Reflection.tex}

\begin{enumerate}
  \item \textbf{What went well while writing this deliverable?}   \\
  The process of writing this deliverable was smooth due to the clear structure and guidelines provided. The team collaborated effectively, leveraging each member's strengths. Additionally, the availability of comprehensive documentation and resources facilitated the writing process.

  \item \textbf{What pain points did you experience during this deliverable, and how did you resolve them?}  \\
  One of the main pain points was ensuring consistency across different sections of the document. To resolve this, we conducted regular team meetings to review progress and align on the content. Another challenge was integrating feedback from various team members, which sometimes led to conflicting requirements. We addressed this by prioritizing feedback based on its impact on the project and seeking clarification when necessary.

  \item \textbf{Which of your design decisions stemmed from speaking to your client(s) or a proxy (e.g., your peers, stakeholders, potential users)? For those that were not, why, and where did they come from?}  \\
  None of our existing documents needed to be changed as they were correct upon review.

  \item \textbf{While creating the design doc, what parts of your other documents (e.g., requirements, hazard analysis, etc.), if any, needed to be changed, and why?}  \\
  During the creation of the design document, we identified the need to update the requirements document to reflect changes in the authentication mechanism. Additionally, the hazard analysis document was revised to include potential security risks associated with external service integrations. These changes were necessary to ensure all documents were aligned and accurately represented the current state of the project.

  \item \textbf{What are the limitations of your solution? Put another way, given unlimited resources, what could you do to make the project better?}  \\
  One limitation of our solution is the reliance on external services, which introduces dependencies and potential points of failure. Given unlimited resources, we could develop in-house solutions for critical services to reduce dependency risks. Additionally, we could invest in more robust testing and monitoring tools to enhance the system's reliability and performance. Expanding the team to include specialists in security and performance optimization would also contribute to a more resilient solution.

  \item \textbf{Give a brief overview of other design solutions you considered. What are the benefits and tradeoffs of those other designs compared with the chosen design? From all the potential options, why did you select the documented design?}  \\
  We considered several design alternatives, including using different authentication providers and data storage solutions. For example, we evaluated Firebase Authentication as an alternative to Auth0. While Firebase offers seamless integration with other Firebase services, Auth0 was chosen for its advanced security features and flexibility.
\end{enumerate}



\end{document}
